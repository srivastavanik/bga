{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nicks\\\\Downloads\\\\breakinggood\\\\frontend\\\\src\\\\components\\\\MoleculeViewer3D.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, Typography, Slider, Grid, Paper, FormControl, InputLabel, Select, MenuItem, IconButton, Tooltip, Box } from '@material-ui/core';\nimport { FullscreenOutlined, FullscreenExitOutlined, RefreshOutlined, SaveAlt, CameraAlt } from '@material-ui/icons';\nimport * as $3Dmol from '3dmol/build/3Dmol-min.js';\nimport 'xterm/css/xterm.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  viewerContainer: {\n    position: 'relative',\n    height: '400px',\n    width: '100%',\n    border: `1px solid ${theme.palette.divider}`,\n    borderRadius: theme.shape.borderRadius,\n    overflow: 'hidden'\n  },\n  fullscreenContainer: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100vw',\n    height: '100vh',\n    zIndex: 9999,\n    backgroundColor: theme.palette.background.paper\n  },\n  controlsContainer: {\n    padding: theme.spacing(2),\n    marginTop: theme.spacing(2)\n  },\n  controlRow: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: theme.spacing(2)\n  },\n  controlLabel: {\n    minWidth: '120px'\n  },\n  viewerControls: {\n    position: 'absolute',\n    top: theme.spacing(1),\n    right: theme.spacing(1),\n    zIndex: 100,\n    backgroundColor: 'rgba(255,255,255,0.7)',\n    borderRadius: theme.shape.borderRadius,\n    padding: theme.spacing(0.5)\n  },\n  slider: {\n    width: '100%',\n    maxWidth: '300px'\n  },\n  sliderContainer: {\n    flexGrow: 1,\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1)\n  },\n  formControl: {\n    minWidth: 120\n  }\n}));\nconst MoleculeViewer3D = ({\n  moleculeData,\n  format = 'smiles',\n  viewerType = '3dmol',\n  initialStyle = 'stick',\n  showControls = true,\n  height = 400,\n  width = '100%'\n}) => {\n  _s();\n  const classes = useStyles();\n  const viewerRef = useRef(null);\n  const containerRef = useRef(null);\n  const [viewer, setViewer] = useState(null);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [modelStyle, setModelStyle] = useState(initialStyle);\n  const [surfaceOpacity, setSurfaceOpacity] = useState(0.5);\n  const [surfaceType, setSurfaceType] = useState('VDW');\n  const [backgroundColor, setBackgroundColor] = useState('#ffffff');\n  const [rotationSpeed, setRotationSpeed] = useState(0);\n  const [isSurfaceVisible, setIsSurfaceVisible] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [molData, setMolData] = useState(null);\n  const [error, setError] = useState(null);\n  const animationRef = useRef(null);\n\n  // Fetch or convert molecule data whenever moleculeData or format changes\n  useEffect(() => {\n    setIsLoading(true);\n    setError(null);\n    setMolData(null); // Clear previous data\n\n    if (!moleculeData) {\n      setError('No molecule data provided');\n      setIsLoading(false);\n      return;\n    }\n    const fetchMoleculeData = async () => {\n      try {\n        let data = moleculeData;\n        let currentFormat = format;\n\n        // If SMILES is provided, convert it to 3D structure via our backend API\n        if (format === 'smiles') {\n          const response = await axios.post('/api/simulation/3d-structure', {\n            smiles: moleculeData\n          });\n          if (response.data && response.data.molblock) {\n            data = response.data.molblock;\n            currentFormat = 'mol'; // The backend returns molblock format\n          } else {\n            throw new Error('Failed to convert SMILES to 3D structure');\n          }\n        }\n        setMolData({\n          data: data,\n          format: currentFormat\n        });\n        setIsLoading(false);\n      } catch (err) {\n        console.error('Error fetching molecule data:', err);\n        setError(err.message || 'Failed to load molecule data');\n        setIsLoading(false);\n      }\n    };\n    fetchMoleculeData();\n    // Add viewer to dependency array to re-run if viewer instance changes\n  }, [moleculeData, format, viewer]);\n\n  // Initialize or update the 3Dmol.js viewer when molData or background changes\n  useEffect(() => {\n    if (!viewerRef.current || isLoading || !molData) return;\n    let currentViewer = viewer;\n\n    // Initialize viewer if it doesn't exist\n    if (!currentViewer) {\n      const viewerConfig = {\n        backgroundColor\n      };\n      currentViewer = $3Dmol.createViewer(viewerRef.current, viewerConfig);\n      setViewer(currentViewer);\n    } else {\n      // Clear existing models if updating\n      currentViewer.removeAllModels();\n      currentViewer.removeAllSurfaces();\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n      // Update background if it changed\n      currentViewer.setBackgroundColor(backgroundColor);\n    }\n\n    // Load the new molecule data\n    try {\n      let model;\n      if (molData.format === 'pdb') {\n        model = currentViewer.addModel(molData.data, 'pdb');\n      } else if (molData.format === 'mol' || molData.format === 'sdf') {\n        model = currentViewer.addModel(molData.data, 'mol');\n      } else {\n        // Attempt to add with the provided format, fallback or error handling might be needed\n        model = currentViewer.addModel(molData.data, molData.format);\n      }\n\n      // Apply initial style\n      applyStyle(currentViewer, model, modelStyle);\n\n      // If surface is enabled, apply it\n      if (isSurfaceVisible) {\n        applySurface(currentViewer, model, surfaceType, surfaceOpacity);\n      }\n      currentViewer.zoomTo();\n      currentViewer.render();\n\n      // Restart animation if rotationSpeed > 0\n      if (rotationSpeed > 0) {\n        startAnimation(currentViewer, rotationSpeed);\n      }\n    } catch (err) {\n      console.error('Error rendering molecule:', err);\n      setError(`Failed to render molecule: ${err.message}`);\n    }\n\n    // Cleanup function for animation\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n    // Add dependencies that should trigger re-initialization or update\n  }, [molData, isLoading, backgroundColor]);\n\n  // Apply style changes\n  useEffect(() => {\n    if (!viewer) return;\n    try {\n      viewer.removeAllSurfaces();\n      applyStyle(viewer, null, modelStyle);\n      if (isSurfaceVisible) {\n        applySurface(viewer, null, surfaceType, surfaceOpacity);\n      }\n      viewer.render();\n    } catch (err) {\n      console.error('Error applying style:', err);\n    }\n  }, [viewer, modelStyle, isSurfaceVisible, surfaceType, surfaceOpacity]);\n\n  // Handle background color changes\n  useEffect(() => {\n    if (!viewer) return;\n    viewer.setBackgroundColor(backgroundColor);\n    viewer.render();\n  }, [backgroundColor, viewer]);\n\n  // Handle rotation speed changes\n  useEffect(() => {\n    if (!viewer) return;\n    if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n      animationRef.current = null;\n    }\n    if (rotationSpeed > 0) {\n      startAnimation(viewer, rotationSpeed);\n    }\n  }, [rotationSpeed, viewer]);\n\n  // Apply style to the model\n  const applyStyle = (viewer, model, style) => {\n    if (!viewer) return;\n\n    // Apply to all models if model is not specified\n    const selector = model ? {\n      model\n    } : {};\n    viewer.removeAllStyles();\n    switch (style) {\n      case 'stick':\n        viewer.setStyle(selector, {\n          stick: {}\n        });\n        break;\n      case 'line':\n        viewer.setStyle(selector, {\n          line: {}\n        });\n        break;\n      case 'cross':\n        viewer.setStyle(selector, {\n          cross: {\n            linewidth: 5\n          }\n        });\n        break;\n      case 'sphere':\n        viewer.setStyle(selector, {\n          sphere: {\n            scale: 0.3\n          }\n        });\n        break;\n      case 'cartoon':\n        viewer.setStyle(selector, {\n          cartoon: {}\n        });\n        break;\n      case 'ballAndStick':\n        viewer.setStyle(selector, {\n          stick: {\n            radius: 0.15\n          },\n          sphere: {\n            scale: 0.3\n          }\n        });\n        break;\n      default:\n        viewer.setStyle(selector, {\n          stick: {}\n        });\n    }\n  };\n\n  // Apply surface to the model\n  const applySurface = (viewer, model, surfaceType, opacity) => {\n    if (!viewer) return;\n    const selector = model ? {\n      model\n    } : {};\n    const surfaceOptions = {\n      opacity\n    };\n    switch (surfaceType) {\n      case 'VDW':\n        viewer.addSurface($3Dmol.SurfaceType.VDW, surfaceOptions, selector);\n        break;\n      case 'SAS':\n        viewer.addSurface($3Dmol.SurfaceType.SAS, surfaceOptions, selector);\n        break;\n      case 'SES':\n        viewer.addSurface($3Dmol.SurfaceType.SES, surfaceOptions, selector);\n        break;\n      case 'MS':\n        viewer.addSurface($3Dmol.SurfaceType.MS, surfaceOptions, selector);\n        break;\n      default:\n        viewer.addSurface($3Dmol.SurfaceType.VDW, surfaceOptions, selector);\n    }\n  };\n\n  // Start rotation animation\n  const startAnimation = (viewer, speed) => {\n    if (!viewer) return;\n    const rotate = () => {\n      viewer.rotate(1 * (speed / 10), {\n        x: 0,\n        y: 1,\n        z: 0\n      });\n      viewer.render();\n      animationRef.current = requestAnimationFrame(rotate);\n    };\n    animationRef.current = requestAnimationFrame(rotate);\n  };\n\n  // Toggle fullscreen mode\n  const toggleFullscreen = () => {\n    setIsFullscreen(!isFullscreen);\n  };\n\n  // Reset view\n  const resetView = () => {\n    if (viewer) {\n      viewer.zoomTo();\n      viewer.render();\n    }\n  };\n\n  // Take screenshot\n  const takeScreenshot = () => {\n    if (!viewer) return;\n    try {\n      const imgData = viewer.pngURI();\n      const a = document.createElement('a');\n      a.href = imgData;\n      a.download = 'molecule.png';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n    } catch (err) {\n      console.error('Error taking screenshot:', err);\n    }\n  };\n\n  // Handle style change\n  const handleStyleChange = event => {\n    setModelStyle(event.target.value);\n  };\n\n  // Handle surface type change\n  const handleSurfaceTypeChange = event => {\n    setSurfaceType(event.target.value);\n  };\n\n  // Toggle surface visibility\n  const toggleSurface = () => {\n    setIsSurfaceVisible(!isSurfaceVisible);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: isFullscreen ? classes.fullscreenContainer : classes.viewerContainer,\n      style: !isFullscreen ? {\n        height: `${height}px`,\n        width\n      } : {},\n      children: isLoading ? /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100%\",\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"Loading molecule...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100%\",\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          color: \"error\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.viewerControls,\n          children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            title: isFullscreen ? \"Exit Fullscreen\" : \"Fullscreen\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: toggleFullscreen,\n              children: isFullscreen ? /*#__PURE__*/_jsxDEV(FullscreenExitOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 35\n              }, this) : /*#__PURE__*/_jsxDEV(FullscreenOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 64\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Reset View\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: resetView,\n              children: /*#__PURE__*/_jsxDEV(RefreshOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Save Image\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: takeScreenshot,\n              children: /*#__PURE__*/_jsxDEV(CameraAlt, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: viewerRef,\n          style: {\n            width: '100%',\n            height: '100%'\n          },\n          \"data-testid\": \"molecule-viewer-3d\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), showControls && !isLoading && !error && /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.controlsContainer,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.controlRow,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.controlLabel,\n              children: \"Representation:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              className: classes.formControl,\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                value: modelStyle,\n                onChange: handleStyleChange,\n                displayEmpty: true,\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"stick\",\n                  children: \"Stick\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"line\",\n                  children: \"Line\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"cross\",\n                  children: \"Cross\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"sphere\",\n                  children: \"Sphere\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"ballAndStick\",\n                  children: \"Ball and Stick\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"cartoon\",\n                  children: \"Cartoon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.controlRow,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.controlLabel,\n              children: \"Surface:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: isSurfaceVisible ? \"contained\" : \"outlined\",\n              color: isSurfaceVisible ? \"primary\" : \"default\",\n              onClick: toggleSurface,\n              children: isSurfaceVisible ? \"Hide Surface\" : \"Show Surface\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), isSurfaceVisible && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.controlRow,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.controlLabel,\n                children: \"Surface Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                className: classes.formControl,\n                children: /*#__PURE__*/_jsxDEV(Select, {\n                  value: surfaceType,\n                  onChange: handleSurfaceTypeChange,\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"VDW\",\n                    children: \"Van der Waals\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 445,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"SAS\",\n                    children: \"Solvent Accessible\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 446,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"SES\",\n                    children: \"Solvent Excluded\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"MS\",\n                    children: \"Molecular Surface\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.controlRow,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.controlLabel,\n                children: \"Opacity:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.sliderContainer,\n                children: /*#__PURE__*/_jsxDEV(Slider, {\n                  value: surfaceOpacity,\n                  min: 0,\n                  max: 1,\n                  step: 0.1,\n                  onChange: (_, newValue) => setSurfaceOpacity(newValue),\n                  \"aria-labelledby\": \"surface-opacity-slider\",\n                  className: classes.slider\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                children: surfaceOpacity.toFixed(1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.controlRow,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.controlLabel,\n              children: \"Background:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              className: classes.formControl,\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                value: backgroundColor,\n                onChange: e => setBackgroundColor(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"#ffffff\",\n                  children: \"White\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"#000000\",\n                  children: \"Black\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"#f5f5f5\",\n                  children: \"Light Gray\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"#121212\",\n                  children: \"Dark Gray\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"#e3f2fd\",\n                  children: \"Light Blue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.controlRow,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.controlLabel,\n              children: \"Auto-Rotate:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.sliderContainer,\n              children: /*#__PURE__*/_jsxDEV(Slider, {\n                value: rotationSpeed,\n                min: 0,\n                max: 10,\n                step: 1,\n                onChange: (_, newValue) => setRotationSpeed(newValue),\n                \"aria-labelledby\": \"rotation-speed-slider\",\n                className: classes.slider\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              children: rotationSpeed\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n};\n_s(MoleculeViewer3D, \"yvhryrr96+J7vEUcu9PV+F8O35E=\", false, function () {\n  return [useStyles];\n});\n_c = MoleculeViewer3D;\nMoleculeViewer3D.propTypes = {\n  moleculeData: PropTypes.string,\n  format: PropTypes.oneOf(['smiles', 'pdb', 'mol2', 'sdf', 'cif', 'xyz']),\n  viewerType: PropTypes.string,\n  initialStyle: PropTypes.oneOf(['stick', 'line', 'cross', 'sphere', 'cartoon', 'ballAndStick']),\n  showControls: PropTypes.bool,\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\nexport default MoleculeViewer3D;\nvar _c;\n$RefreshReg$(_c, \"MoleculeViewer3D\");","map":{"version":3,"names":["React","useEffect","useRef","useState","PropTypes","makeStyles","Button","Typography","Slider","Grid","Paper","FormControl","InputLabel","Select","MenuItem","IconButton","Tooltip","Box","FullscreenOutlined","FullscreenExitOutlined","RefreshOutlined","SaveAlt","CameraAlt","$3Dmol","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","useStyles","theme","viewerContainer","position","height","width","border","palette","divider","borderRadius","shape","overflow","fullscreenContainer","top","left","zIndex","backgroundColor","background","paper","controlsContainer","padding","spacing","marginTop","controlRow","display","alignItems","marginBottom","controlLabel","minWidth","viewerControls","right","slider","maxWidth","sliderContainer","flexGrow","marginLeft","marginRight","formControl","MoleculeViewer3D","moleculeData","format","viewerType","initialStyle","showControls","_s","classes","viewerRef","containerRef","viewer","setViewer","isFullscreen","setIsFullscreen","modelStyle","setModelStyle","surfaceOpacity","setSurfaceOpacity","surfaceType","setSurfaceType","setBackgroundColor","rotationSpeed","setRotationSpeed","isSurfaceVisible","setIsSurfaceVisible","isLoading","setIsLoading","molData","setMolData","error","setError","animationRef","fetchMoleculeData","data","currentFormat","response","post","smiles","molblock","Error","err","console","message","current","currentViewer","viewerConfig","createViewer","removeAllModels","removeAllSurfaces","cancelAnimationFrame","model","addModel","applyStyle","applySurface","zoomTo","render","startAnimation","style","selector","removeAllStyles","setStyle","stick","line","cross","linewidth","sphere","scale","cartoon","radius","opacity","surfaceOptions","addSurface","SurfaceType","VDW","SAS","SES","MS","speed","rotate","x","y","z","requestAnimationFrame","toggleFullscreen","resetView","takeScreenshot","imgData","pngURI","a","document","createElement","href","download","body","appendChild","click","removeChild","handleStyleChange","event","target","value","handleSurfaceTypeChange","toggleSurface","children","ref","className","justifyContent","variant","fileName","_jsxFileName","lineNumber","columnNumber","color","title","size","onClick","container","item","xs","sm","onChange","displayEmpty","min","max","step","_","newValue","toFixed","e","_c","propTypes","string","oneOf","bool","oneOfType","number","$RefreshReg$"],"sources":["C:/Users/nicks/Downloads/breakinggood/frontend/src/components/MoleculeViewer3D.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, Typography, Slider, Grid, Paper, FormControl, InputLabel, Select, MenuItem, IconButton, Tooltip, Box } from '@material-ui/core';\r\nimport { FullscreenOutlined, FullscreenExitOutlined, RefreshOutlined, SaveAlt, CameraAlt } from '@material-ui/icons';\r\nimport * as $3Dmol from '3dmol/build/3Dmol-min.js';\r\nimport 'xterm/css/xterm.css';\r\nimport axios from 'axios';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  viewerContainer: {\r\n    position: 'relative',\r\n    height: '400px',\r\n    width: '100%',\r\n    border: `1px solid ${theme.palette.divider}`,\r\n    borderRadius: theme.shape.borderRadius,\r\n    overflow: 'hidden',\r\n  },\r\n  fullscreenContainer: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100vw',\r\n    height: '100vh',\r\n    zIndex: 9999,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  controlsContainer: {\r\n    padding: theme.spacing(2),\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  controlRow: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  controlLabel: {\r\n    minWidth: '120px',\r\n  },\r\n  viewerControls: {\r\n    position: 'absolute',\r\n    top: theme.spacing(1),\r\n    right: theme.spacing(1),\r\n    zIndex: 100,\r\n    backgroundColor: 'rgba(255,255,255,0.7)',\r\n    borderRadius: theme.shape.borderRadius,\r\n    padding: theme.spacing(0.5),\r\n  },\r\n  slider: {\r\n    width: '100%',\r\n    maxWidth: '300px',\r\n  },\r\n  sliderContainer: {\r\n    flexGrow: 1,\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  formControl: {\r\n    minWidth: 120,\r\n  },\r\n}));\r\n\r\nconst MoleculeViewer3D = ({\r\n  moleculeData,\r\n  format = 'smiles',\r\n  viewerType = '3dmol',\r\n  initialStyle = 'stick',\r\n  showControls = true,\r\n  height = 400,\r\n  width = '100%'\r\n}) => {\r\n  const classes = useStyles();\r\n  const viewerRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const [viewer, setViewer] = useState(null);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [modelStyle, setModelStyle] = useState(initialStyle);\r\n  const [surfaceOpacity, setSurfaceOpacity] = useState(0.5);\r\n  const [surfaceType, setSurfaceType] = useState('VDW');\r\n  const [backgroundColor, setBackgroundColor] = useState('#ffffff');\r\n  const [rotationSpeed, setRotationSpeed] = useState(0);\r\n  const [isSurfaceVisible, setIsSurfaceVisible] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [molData, setMolData] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const animationRef = useRef(null);\r\n\r\n  // Fetch or convert molecule data whenever moleculeData or format changes\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setMolData(null); // Clear previous data\r\n\r\n    if (!moleculeData) {\r\n      setError('No molecule data provided');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchMoleculeData = async () => {\r\n      try {\r\n        let data = moleculeData;\r\n        let currentFormat = format;\r\n\r\n        // If SMILES is provided, convert it to 3D structure via our backend API\r\n        if (format === 'smiles') {\r\n          const response = await axios.post('/api/simulation/3d-structure', { \r\n            smiles: moleculeData \r\n          });\r\n          \r\n          if (response.data && response.data.molblock) {\r\n            data = response.data.molblock;\r\n            currentFormat = 'mol'; // The backend returns molblock format\r\n          } else {\r\n            throw new Error('Failed to convert SMILES to 3D structure');\r\n          }\r\n        }\r\n\r\n        setMolData({ data: data, format: currentFormat });\r\n        setIsLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching molecule data:', err);\r\n        setError(err.message || 'Failed to load molecule data');\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchMoleculeData();\r\n  // Add viewer to dependency array to re-run if viewer instance changes\r\n  }, [moleculeData, format, viewer]); \r\n\r\n  // Initialize or update the 3Dmol.js viewer when molData or background changes\r\n  useEffect(() => {\r\n    if (!viewerRef.current || isLoading || !molData) return;\r\n\r\n    let currentViewer = viewer;\r\n\r\n    // Initialize viewer if it doesn't exist\r\n    if (!currentViewer) {\r\n      const viewerConfig = { backgroundColor };\r\n      currentViewer = $3Dmol.createViewer(viewerRef.current, viewerConfig);\r\n      setViewer(currentViewer);\r\n    } else {\r\n      // Clear existing models if updating\r\n      currentViewer.removeAllModels();\r\n      currentViewer.removeAllSurfaces();\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n        animationRef.current = null;\r\n      }\r\n      // Update background if it changed\r\n      currentViewer.setBackgroundColor(backgroundColor); \r\n    }\r\n\r\n    // Load the new molecule data\r\n    try {\r\n      let model;\r\n      if (molData.format === 'pdb') {\r\n        model = currentViewer.addModel(molData.data, 'pdb');\r\n      } else if (molData.format === 'mol' || molData.format === 'sdf') {\r\n        model = currentViewer.addModel(molData.data, 'mol');\r\n      } else {\r\n        // Attempt to add with the provided format, fallback or error handling might be needed\r\n        model = currentViewer.addModel(molData.data, molData.format);\r\n      }\r\n      \r\n      // Apply initial style\r\n      applyStyle(currentViewer, model, modelStyle);\r\n      \r\n      // If surface is enabled, apply it\r\n      if (isSurfaceVisible) {\r\n        applySurface(currentViewer, model, surfaceType, surfaceOpacity);\r\n      }\r\n      \r\n      currentViewer.zoomTo();\r\n      currentViewer.render();\r\n      \r\n      // Restart animation if rotationSpeed > 0\r\n      if (rotationSpeed > 0) {\r\n        startAnimation(currentViewer, rotationSpeed);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error rendering molecule:', err);\r\n      setError(`Failed to render molecule: ${err.message}`);\r\n    }\r\n\r\n    // Cleanup function for animation\r\n    return () => {\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n    };\r\n  // Add dependencies that should trigger re-initialization or update\r\n  }, [molData, isLoading, backgroundColor]);\r\n\r\n  // Apply style changes\r\n  useEffect(() => {\r\n    if (!viewer) return;\r\n    \r\n    try {\r\n      viewer.removeAllSurfaces();\r\n      applyStyle(viewer, null, modelStyle);\r\n      \r\n      if (isSurfaceVisible) {\r\n        applySurface(viewer, null, surfaceType, surfaceOpacity);\r\n      }\r\n      \r\n      viewer.render();\r\n    } catch (err) {\r\n      console.error('Error applying style:', err);\r\n    }\r\n  }, [viewer, modelStyle, isSurfaceVisible, surfaceType, surfaceOpacity]);\r\n\r\n  // Handle background color changes\r\n  useEffect(() => {\r\n    if (!viewer) return;\r\n    viewer.setBackgroundColor(backgroundColor);\r\n    viewer.render();\r\n  }, [backgroundColor, viewer]);\r\n\r\n  // Handle rotation speed changes\r\n  useEffect(() => {\r\n    if (!viewer) return;\r\n    \r\n    if (animationRef.current) {\r\n      cancelAnimationFrame(animationRef.current);\r\n      animationRef.current = null;\r\n    }\r\n    \r\n    if (rotationSpeed > 0) {\r\n      startAnimation(viewer, rotationSpeed);\r\n    }\r\n  }, [rotationSpeed, viewer]);\r\n\r\n  // Apply style to the model\r\n  const applyStyle = (viewer, model, style) => {\r\n    if (!viewer) return;\r\n    \r\n    // Apply to all models if model is not specified\r\n    const selector = model ? { model } : {};\r\n    \r\n    viewer.removeAllStyles();\r\n    \r\n    switch (style) {\r\n      case 'stick':\r\n        viewer.setStyle(selector, { stick: {} });\r\n        break;\r\n      case 'line':\r\n        viewer.setStyle(selector, { line: {} });\r\n        break;\r\n      case 'cross':\r\n        viewer.setStyle(selector, { cross: { linewidth: 5 } });\r\n        break;\r\n      case 'sphere':\r\n        viewer.setStyle(selector, { sphere: { scale: 0.3 } });\r\n        break;\r\n      case 'cartoon':\r\n        viewer.setStyle(selector, { cartoon: {} });\r\n        break;\r\n      case 'ballAndStick':\r\n        viewer.setStyle(selector, { \r\n          stick: { radius: 0.15 }, \r\n          sphere: { scale: 0.3 } \r\n        });\r\n        break;\r\n      default:\r\n        viewer.setStyle(selector, { stick: {} });\r\n    }\r\n  };\r\n\r\n  // Apply surface to the model\r\n  const applySurface = (viewer, model, surfaceType, opacity) => {\r\n    if (!viewer) return;\r\n    \r\n    const selector = model ? { model } : {};\r\n    const surfaceOptions = { opacity };\r\n    \r\n    switch (surfaceType) {\r\n      case 'VDW':\r\n        viewer.addSurface($3Dmol.SurfaceType.VDW, surfaceOptions, selector);\r\n        break;\r\n      case 'SAS':\r\n        viewer.addSurface($3Dmol.SurfaceType.SAS, surfaceOptions, selector);\r\n        break;\r\n      case 'SES':\r\n        viewer.addSurface($3Dmol.SurfaceType.SES, surfaceOptions, selector);\r\n        break;\r\n      case 'MS':\r\n        viewer.addSurface($3Dmol.SurfaceType.MS, surfaceOptions, selector);\r\n        break;\r\n      default:\r\n        viewer.addSurface($3Dmol.SurfaceType.VDW, surfaceOptions, selector);\r\n    }\r\n  };\r\n\r\n  // Start rotation animation\r\n  const startAnimation = (viewer, speed) => {\r\n    if (!viewer) return;\r\n    \r\n    const rotate = () => {\r\n      viewer.rotate(1 * (speed / 10), { x: 0, y: 1, z: 0 });\r\n      viewer.render();\r\n      animationRef.current = requestAnimationFrame(rotate);\r\n    };\r\n    \r\n    animationRef.current = requestAnimationFrame(rotate);\r\n  };\r\n\r\n  // Toggle fullscreen mode\r\n  const toggleFullscreen = () => {\r\n    setIsFullscreen(!isFullscreen);\r\n  };\r\n\r\n  // Reset view\r\n  const resetView = () => {\r\n    if (viewer) {\r\n      viewer.zoomTo();\r\n      viewer.render();\r\n    }\r\n  };\r\n\r\n  // Take screenshot\r\n  const takeScreenshot = () => {\r\n    if (!viewer) return;\r\n    \r\n    try {\r\n      const imgData = viewer.pngURI();\r\n      const a = document.createElement('a');\r\n      a.href = imgData;\r\n      a.download = 'molecule.png';\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n    } catch (err) {\r\n      console.error('Error taking screenshot:', err);\r\n    }\r\n  };\r\n\r\n  // Handle style change\r\n  const handleStyleChange = (event) => {\r\n    setModelStyle(event.target.value);\r\n  };\r\n\r\n  // Handle surface type change\r\n  const handleSurfaceTypeChange = (event) => {\r\n    setSurfaceType(event.target.value);\r\n  };\r\n\r\n  // Toggle surface visibility\r\n  const toggleSurface = () => {\r\n    setIsSurfaceVisible(!isSurfaceVisible);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div \r\n        ref={containerRef}\r\n        className={isFullscreen ? classes.fullscreenContainer : classes.viewerContainer}\r\n        style={!isFullscreen ? { height: `${height}px`, width } : {}}\r\n      >\r\n        {isLoading ? (\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\">\r\n            <Typography variant=\"h6\">Loading molecule...</Typography>\r\n          </Box>\r\n        ) : error ? (\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\">\r\n            <Typography variant=\"h6\" color=\"error\">{error}</Typography>\r\n          </Box>\r\n        ) : (\r\n          <>\r\n            <div className={classes.viewerControls}>\r\n              <Tooltip title={isFullscreen ? \"Exit Fullscreen\" : \"Fullscreen\"}>\r\n                <IconButton size=\"small\" onClick={toggleFullscreen}>\r\n                  {isFullscreen ? <FullscreenExitOutlined /> : <FullscreenOutlined />}\r\n                </IconButton>\r\n              </Tooltip>\r\n              <Tooltip title=\"Reset View\">\r\n                <IconButton size=\"small\" onClick={resetView}>\r\n                  <RefreshOutlined />\r\n                </IconButton>\r\n              </Tooltip>\r\n              <Tooltip title=\"Save Image\">\r\n                <IconButton size=\"small\" onClick={takeScreenshot}>\r\n                  <CameraAlt />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </div>\r\n            <div \r\n              ref={viewerRef} \r\n              style={{ width: '100%', height: '100%' }}\r\n              data-testid=\"molecule-viewer-3d\"\r\n            ></div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {showControls && !isLoading && !error && (\r\n        <Paper className={classes.controlsContainer}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} sm={6}>\r\n              <div className={classes.controlRow}>\r\n                <Typography className={classes.controlLabel}>\r\n                  Representation:\r\n                </Typography>\r\n                <FormControl className={classes.formControl}>\r\n                  <Select\r\n                    value={modelStyle}\r\n                    onChange={handleStyleChange}\r\n                    displayEmpty\r\n                  >\r\n                    <MenuItem value=\"stick\">Stick</MenuItem>\r\n                    <MenuItem value=\"line\">Line</MenuItem>\r\n                    <MenuItem value=\"cross\">Cross</MenuItem>\r\n                    <MenuItem value=\"sphere\">Sphere</MenuItem>\r\n                    <MenuItem value=\"ballAndStick\">Ball and Stick</MenuItem>\r\n                    <MenuItem value=\"cartoon\">Cartoon</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </div>\r\n              \r\n              <div className={classes.controlRow}>\r\n                <Typography className={classes.controlLabel}>\r\n                  Surface:\r\n                </Typography>\r\n                <Button \r\n                  variant={isSurfaceVisible ? \"contained\" : \"outlined\"} \r\n                  color={isSurfaceVisible ? \"primary\" : \"default\"}\r\n                  onClick={toggleSurface}\r\n                >\r\n                  {isSurfaceVisible ? \"Hide Surface\" : \"Show Surface\"}\r\n                </Button>\r\n              </div>\r\n              \r\n              {isSurfaceVisible && (\r\n                <>\r\n                  <div className={classes.controlRow}>\r\n                    <Typography className={classes.controlLabel}>\r\n                      Surface Type:\r\n                    </Typography>\r\n                    <FormControl className={classes.formControl}>\r\n                      <Select\r\n                        value={surfaceType}\r\n                        onChange={handleSurfaceTypeChange}\r\n                      >\r\n                        <MenuItem value=\"VDW\">Van der Waals</MenuItem>\r\n                        <MenuItem value=\"SAS\">Solvent Accessible</MenuItem>\r\n                        <MenuItem value=\"SES\">Solvent Excluded</MenuItem>\r\n                        <MenuItem value=\"MS\">Molecular Surface</MenuItem>\r\n                      </Select>\r\n                    </FormControl>\r\n                  </div>\r\n                  \r\n                  <div className={classes.controlRow}>\r\n                    <Typography className={classes.controlLabel}>\r\n                      Opacity:\r\n                    </Typography>\r\n                    <div className={classes.sliderContainer}>\r\n                      <Slider\r\n                        value={surfaceOpacity}\r\n                        min={0}\r\n                        max={1}\r\n                        step={0.1}\r\n                        onChange={(_, newValue) => setSurfaceOpacity(newValue)}\r\n                        aria-labelledby=\"surface-opacity-slider\"\r\n                        className={classes.slider}\r\n                      />\r\n                    </div>\r\n                    <Typography>{surfaceOpacity.toFixed(1)}</Typography>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <div className={classes.controlRow}>\r\n                <Typography className={classes.controlLabel}>\r\n                  Background:\r\n                </Typography>\r\n                <FormControl className={classes.formControl}>\r\n                  <Select\r\n                    value={backgroundColor}\r\n                    onChange={(e) => setBackgroundColor(e.target.value)}\r\n                  >\r\n                    <MenuItem value=\"#ffffff\">White</MenuItem>\r\n                    <MenuItem value=\"#000000\">Black</MenuItem>\r\n                    <MenuItem value=\"#f5f5f5\">Light Gray</MenuItem>\r\n                    <MenuItem value=\"#121212\">Dark Gray</MenuItem>\r\n                    <MenuItem value=\"#e3f2fd\">Light Blue</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </div>\r\n              \r\n              <div className={classes.controlRow}>\r\n                <Typography className={classes.controlLabel}>\r\n                  Auto-Rotate:\r\n                </Typography>\r\n                <div className={classes.sliderContainer}>\r\n                  <Slider\r\n                    value={rotationSpeed}\r\n                    min={0}\r\n                    max={10}\r\n                    step={1}\r\n                    onChange={(_, newValue) => setRotationSpeed(newValue)}\r\n                    aria-labelledby=\"rotation-speed-slider\"\r\n                    className={classes.slider}\r\n                  />\r\n                </div>\r\n                <Typography>{rotationSpeed}</Typography>\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </Paper>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nMoleculeViewer3D.propTypes = {\r\n  moleculeData: PropTypes.string,\r\n  format: PropTypes.oneOf(['smiles', 'pdb', 'mol2', 'sdf', 'cif', 'xyz']),\r\n  viewerType: PropTypes.string,\r\n  initialStyle: PropTypes.oneOf(['stick', 'line', 'cross', 'sphere', 'cartoon', 'ballAndStick']),\r\n  showControls: PropTypes.bool,\r\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n};\r\n\r\nexport default MoleculeViewer3D; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}